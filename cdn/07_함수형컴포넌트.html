<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- React, ReactDOM, Babel CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <title>함수형 컴포넌트</title>
</head>

<body>
  <!-- index.html -->
  <div id="root"></div>

  <script type="text/babel">
    /* 
      function 컴포넌트명() {
        return 값;
      }
    */


    // App.js
    function App() {
      // CRA, Vite 방식: import {useState} from 'react'
      // CDN 방식에서 useState() 사용시
      const {useState} = React;
      // // const mode = 'WELCOME';
      // const _mode = useState('WELCOME');
      // console.log('_mode', _mode);
      // console.log('_mode[0]', _mode[0]);

      // const [값, set값] = useState('WELCOME');
      const [mode, setMode] = useState('WELCOME');
      const [id, setId] = useState(null);

      const topics = [
        { id: 1, title: 'html', body: 'html is ...' },
        { id: 2, title: 'css', body: 'css is ...' },
        { id: 3, title: 'javascript', body: 'javascript is ...' }
      ];
      
      let content = null;

      if (mode === 'WELCOME') {
        content = <Article title="Welcome" body="Hello, Web" />
      }
      else if (mode === 'READ') {
        let title, body = null;

        for(let i=0; i<topics.length; i++) {
          if(topics[i].id === id) {
            console.log(topics[i].id, id);
            title = topics[i].title;
            body = topics[i].body;
          }
        }
        content = <Article title={title} body={body} />
      }

      return (
        <div>
          {/* 리액트의 속성을 props라 부른다. */}
          {/* <컴포넌트명 속성=값/> */}
          <Header subject="Web" onChangeMode={function() {
            setMode('WELCOME');
          }} />
          <Nav topics={topics} onChangeMode={(_id)=> {
            setMode('READ');
            setId(_id);
          }} />
          {content}
        </div>
      );
    }

    // Header
    function Header(props) {
      // props는 {subject: "React"}
      // props.subject는 React
      return (
        <header>
          <h1>
            <a href="/" onClick={function() {
              event.preventDefault();
              props.onChangeMode();
            }}>{props.subject}</a>
          </h1>
        </header>
      );
    }

    // Nav
    function Nav(props) {
      const lis = [];

      for (let i=0; i<props.topics.length; i++){
        let t = props.topics[i];
        lis.push(<li key={t.id}><a id={t.id} href={"/read/1"+t.id} onClick={function() {
          event.preventDefault();
          props.onChangeMode(Number(event.target.id));
        }}>{t.title}</a></li>);
      }

      return (
        <nav>
          <ol>
            {lis}
          </ol>
        </nav>
      );
    }

    // Article
    function Article(props) {
      return (
        <article>
          <h2>{props.title}</h2>
          {props.body}
        </article>
      );
    }

    // index.js
    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>

</html>